{
  "version": "2.0.0",
  "inputs": [],
  "tasks": [
    {
      "label": "Utils: Install Node Modules (Docker)",
      "type": "shell",
      "command": "docker",
      "args": [
        "run",
        "--rm",
        "-u",
        "1000:1000",
        "-v",
        "${workspaceFolder}:/app",
        "-w",
        "/app",
        "node:24.3.0-alpine",
        "sh",
        "-c",
        "chmod +x scripts/bootstrap.sh && ./scripts/bootstrap.sh"
      ],
      "detail": "Install all node_modules for root, client, and server using Docker (for VS Code intellisense and Problems tab)"
    },
    {
      "label": "Test: Run Client Tests",
      "type": "shell",
      "command": "npx",
      "args": [
        "vitest",
        "run",
        "--reporter=verbose"
      ],
      "options": {
        "cwd": "${workspaceFolder}/client"
      },
      "group": {
        "kind": "test",
        "isDefault": true
      },
      "detail": "Run all client tests using Vitest with jsdom environment."
    },
    {
      "label": "Test: Run Server Tests",
      "type": "shell",
      "command": "npx",
      "args": [
        "vitest",
        "run",
        "--reporter=verbose"
      ],
      "options": {
        "cwd": "${workspaceFolder}/server"
      },
      "group": {
        "kind": "test"
      },
      "detail": "Run all server tests using Vitest with node environment."
    },
    // =============================================================================
    // STAGING DEPLOYMENT (Private Network - test.ts.chis.dev)
    // =============================================================================
    {
      "label": "Staging: Deploy",
      "type": "shell",
      "command": "docker",
      "args": [
        "compose",
        "--profile",
        "staging",
        "up",
        "-d",
        "--build",
        "mongodb",
        "app-staging"
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated"
      },
      "detail": "Deploy to staging (test.ts.chis.dev) on private network"
    },
    {
      "label": "Staging: Stop",
      "type": "shell",
      "command": "docker",
      "args": [
        "compose",
        "--profile",
        "staging",
        "down"
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "detail": "Stop staging deployment"
    },
    // =============================================================================
    // PRODUCTION DEPLOYMENT (Public Network - catan.chis.dev)
    // =============================================================================
    {
      "label": "Prod: Deploy",
      "type": "shell",
      "command": "docker",
      "args": [
        "compose",
        "--profile",
        "prod",
        "up",
        "-d",
        "--build",
        "mongodb",
        "app-prod"
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated"
      },
      "detail": "Deploy to production (catan.chis.dev) on public network"
    },
    {
      "label": "Prod: Stop",
      "type": "shell",
      "command": "docker",
      "args": [
        "compose",
        "--profile",
        "prod",
        "down"
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "detail": "Stop production deployment"
    },
    // =============================================================================
    // UTILITY TASKS
    // =============================================================================
    {
      "label": "Utils: View Containers",
      "type": "shell",
      "command": "docker",
      "args": [
        "ps",
        "-a"
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "detail": "Show all Docker containers"
    },
    {
      "label": "Utils: Clean All",
      "type": "shell",
      "command": "docker",
      "args": [
        "compose",
        "down",
        "--remove-orphans"
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "detail": "Stop and remove all containers"
    },
    // ...existing code...
  ]
}